<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Физический Помощник: Генератор Чертежей</title>
    <script src="https://unpkg.com/konva@8.3.0/konva.min.js"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
    <script src="main.js"></script>
    
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Функция для рендеринга KaTeX
            renderMathInElement(document.getElementById("formulaOutput"), {
                delimiters: [
                    {left: "$$", right: "$$", display: true}, // Блочный режим
                    {left: "$", right: "$", display: false}    // Встроенный режим
                ]
            });

            // Инициализация при изменении контента (для JS-вставки формул)
            const observer = new MutationObserver((mutationsList, observer) => {
                mutationsList.forEach(mutation => {
                    if (mutation.type === 'childList' || mutation.type === 'characterData') {
                        renderMathInElement(document.getElementById("formulaOutput"), {
                            delimiters: [
                                {left: "$$", right: "$$", display: true},
                                {left: "$", right: "$", display: false}
                            ]
                        });
                    }
                });
            });

            observer.observe(document.getElementById("formulaOutput"), { childList: true, subtree: true, characterData: true });
        });
    </script>
</body>
</html>

</body>
</html>
